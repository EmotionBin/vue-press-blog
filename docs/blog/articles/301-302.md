# http 状态码 301 与 302

之前一直对 http 状态码 301 与 302 比较模糊，趁着最近有时间，决定记录一下学习的过程

## 301 和 302 都是什么

301 和 302 是 http 状态码中的两种状态，在概念上主要有以下区别：

- 301 代表永久性转移(Permanently Moved) 也被称为**永久重定向**
- 302 代表暂时性转移(Temporarily Moved ) 也被称为**临时重定向**

具体来说，301 与 302 他们都代表**重定向**，就是说浏览器在拿到服务器返回的这个状态码后会自动跳转到一个新的 url 地址，这个地址可以从响应的 `Location` 首部中获取（用户看到的效果就是他输入的地址 A 瞬间变成了另一个地址 B），这是他们的共同点

[![bTjimq.png](https://s1.ax1x.com/2022/03/12/bTjimq.png)](https://s1.ax1x.com/2022/03/12/bTjimq.png)

[![bTj2cj.png](https://s1.ax1x.com/2022/03/12/bTj2cj.png)](https://s1.ax1x.com/2022/03/12/bTj2cj.png)

根据上面的两张图片，可以看到返回的状态码分别是 301 与 302，根据 `Location` 字段都被重定向到了一个新的 url

那么 301 与 302 又有哪些不同点呢？

- 301 表示旧地址 A 的资源已经被永久地移除了（这个资源不可访问了），**搜索引擎在抓取新内容的同时也将旧的网址交换为重定向之后的网址**
- 302 表示旧地址 A 的资源还在（仍然可以访问），这个重定向只是临时地从旧地址 A 跳转到地址 B，**搜索引擎会抓取新的内容而保存旧的网址**

## 301 与 302 的使用场景

302 在临时重定向或暂时重定向的时候用到，以后可能还会有其他变化，目前的情况只是暂时的

举个例子，假设我现在漂泊在上海打工，只能租房子住，于是我租了一个房子 A，租期一年，在这一年的租期内就可以使用 302 重定向，因为我只租了一年，这一年内暂时住在这个房子 A，一年之后的情况还不知道

301 在永久重定向的时候用到，也就是说情况已经确定了，就是这样不会再改变了

还是上面那个例子，这次我不租房了，假设我实现了财富自由直接在上海买了一套别墅 B，并且决定以后定居上海生活，结婚成家、养老...这时候就可以使用 301 重定向，因为我已经决定以后一直待在上海了

**请尽量使用 301 重定向**，下文中会解释这样做的道理

## url 劫持

url 劫持是一种现象，其中网站从搜索引擎的结果中消失，并被另一个网站取代。其他站点链接到实际的目标页面或 url，但没有直接引用，而是通过重定向

这里摘录百度百科上的解释：

> 从网址 A 做一个 302 重定向到网址 B 时，主机服务器的隐含意思是网址 A 随时有可能改主意，重新显示本身的内容或转向其他的地方。大部分的搜索引擎在大部分情况下，当收到 302 重定向时，一般只要去抓取目标网址就可以了，也就是说网址 B。如果搜索引擎在遇到 302 转向时，百分之百的都抓取目标网址 B 的话，就不用担心网址 URL 劫持了。问题就在于，有的时候搜索引擎，尤其是 Google，并不能总是抓取目标网址。比如说，有的时候 A 网址很短，但是它做了一个 302 重定向到 B 网址，而 B 网址是一个很长的乱七八糟的 URL 网址，甚至还有可能包含一些问号 之类的参数。很自然的，A 网址更加用户友好，而 B 网址既难看，又不用户友好。这时 Google 很有可能会仍然显示网址 A。由于搜索引擎排名算法只是程序而不是人，在遇到 302 重定向的时候，并不能像人一样的去准确判定哪一个网址更适当，这就造成了网址 URL 劫持的可能性。也就是说，一个不道德的人在他自己的网址 A 做一个 302 重定向到你的网址 B，出于某种原因， Google 搜索结果所显示的仍然是网址 A，但是所用的网页内容却是你的网址 B 上的内容，这种情况就叫做网址 URL 劫持。你辛辛苦苦所写的内容就这样被别人偷走了。302 重定向所造成的网址 URL 劫持现象，已经存在一段时间了。不过到目前为止，似乎也没有什么更好的解决方法。在正在进行的谷歌大爸爸数据中心转换中，302 重定向问题也是要被解决的目标之一。从一些搜索结果来看，网址劫持现象有所改善，但是并没有完全解决。

我的理解是，从网站 A（网站比较烂）上做了一个 302 跳转到网站 B（搜索排名很靠前），这时候有时搜索引擎会使用网站 B 的内容，但却收录了网站 A 的地址，这样在不知不觉间，网站 B 在为网站 A 作贡献，网站 A 的排名就靠前了

301 跳转对查找引擎是一种对照驯良的跳转编制，也是查找引擎能够遭遇的跳转编制，它告诉查找引擎，这个地址弃用了，永远转向一个新地址，可以转移新域名的权重。而 302 重定向很容易被搜索引擎误认为是利用多个域名指向同一网站，那么你的网站就会被封掉，罪名是“利用重复的内容来干扰 Google 搜索结果的网站排名”

所以，请尽量使用 301 进行重定向跳转

## seo 友好性

301 重定向对 seo 更友好，而 302 重定向对 seo 不友好

使用 301 重定向来永久重定向页面。“永久”这个词意味着重定向页面的所有权重都会被传递到指向页面

如果我们把一个地址采用 301 跳转方式跳转的话，搜索引擎会把老地址的 PageRank 等信息带到新地址，同时在搜索引擎索引库中彻底废弃掉原先的老地址

302 重定向，一般是做临时性的跳转，是暂时性的，建议不要使用太多的 302 重定向

因为搜索引擎会认为新的跳转 url 是临时性的，用得过多的话，可能会导致降权处理，这个也是必须要去重视的一个地方，千万不要因为使用比较多的 302 重定向，而导致我们的网站被降权

302 重定向将不会将重定向页面的所有权重质量传递到指向页面。重定向页面仍将保留其网页排名、页面权限和流量价值。并且指向页面不会累积任何页面的权重

错误地使用 302 重定向是非常危险的，这会严重损害你网站的搜索引擎可见性

所以，请尽量使用 301 进行重定向跳转

## 参考资料

[http 状态码 301 和 302 详解及区别](https://blog.csdn.net/jiangyu1013/article/details/79884457)  
[浅谈 301 与 302 对 seo 的影响及 nginx 配置](https://www.cnblogs.com/shichangchun/p/11653487.html)
